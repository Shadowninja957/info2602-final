{% extends "layout.html" %}
{% block title %} Welcome {{ current_user.username }} {% endblock %}
{% block page %}  Welcome {{ current_user.username }} {% endblock %}


{{ super() }}

{% block content %}
    <main class="container">

        <div class="card" >
          <div class="card-content">
            <span class="card-title"></span>
            <form name="addForm" method="POST" action="/createPost">
              <div class="input-field">
               <textarea id="textarea1" class="materialize-textarea" name="text"></textarea>
              </div>
              <input class="btn purple black-text " type="submit" value="Add Post" />
              
            </form>
          </div>
        </div>


        <ul class="collection with-header" id="result" style="overflow-y: scroll;">
            {% if current_user.is_authenticated %}
                {% for post in posts %}
                     <li class="card collection-item col s12 m4">
                        <form id="post{{post.id}}" method="POST" action="updatePost/{{post.id}}" class="card-content">
                          <span class="card-title"><i class="material-icons prefix">account_circle</i>User: {{post.author.username}}
                          </span>
                          <p> {{ post.text }} </p>
                        </form>
                        
                        <div class="card-action">
                          <p>Likes: {{ post.getTotalLikes() }} Dislikes: {{ post.getTotalDislikes() }}</p>
                          
                          <select class="browser-default" onchange="post{{post.id}}.submit()" name="react">
                            <option value="Like">Like</option>
                            <option value="Dislike">Dislike</option>
                          </select>
                          
                          {% if current_user.id == post.author.id %}
                          <a href="/deletePost/{{post.id}}">DELETE</a>
                          {% endif %}
                        </div>
                    
                    </li>
                {% endfor %}
            {% endif %}
        </ul>
    </main>
{% endblock %}